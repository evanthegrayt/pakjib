#!/usr/bin/env ruby
#==============================================================#
#        File: pakjib                                          #
# Description: CLI executable for word-flipper                 #
#                                                              #
#      Author: Evan Gray                                       #
#==============================================================#

require 'optparse'
require_relative '../lib/pakjib'

USAGE = "USAGE: #{File.basename(__FILE__)} [OPTIONS] [WORDS]..."
opts = {}
OptionParser.new do |o|
  o.banner = USAGE
  o.on('-r', '--[no-]reverse', 'Reverse flipping') { |v| opts[:reverse] = v }
  o.on('-l', '--[no-]lazy', 'Skip small words') { |v| opts[:lazy] = v }
  o.on('-s', '--[no-]save', 'Save results in log') { |v| opts[:save] = v }
  o.on('--exclude=WORDS', Array, 'Words to skip') { |v| opts[:exclude] = v }
end.parse!(ARGV)

abort(USAGE) if ARGV.empty?

begin
  words = PakJib.new(ARGV, opts)
rescue PakJib::JakPibError
  abort("Please pass more flip-able words")
end

if opts[:save]
  puts "Saving [#{words.pakjib}] to #{words.logfile}"
  words.save
else
  puts words.pakjib
end

